% Document Type
\documentclass[a4paper,12pt]{report}

% Packages 
\usepackage[english]{babel}
\usepackage[utf8]{inputenc}
\usepackage{xspace}
\usepackage{indentfirst}
\usepackage{titlesec}
\usepackage{graphicx}
\usepackage{listings}
\usepackage[export]{adjustbox}
\usepackage{wrapfig}
\usepackage{amsmath} 
\usepackage{bussproofs}
\usepackage[firstinits=true,backend=biber]{biblatex}
%\usepackage{cite}
\usepackage[nonumberlist,nopostdot]{glossaries}
\usepackage{color}
\usepackage[toc,page]{appendix}
\usepackage{abstract}
\usepackage{hyperref}
\usepackage{eso-pic}
\usepackage{afterpage}
\usepackage{csquotes}

% PDF setup
\hypersetup{							
pdfauthor = {Mohamed Sami Cherif},
pdftitle = {Title},	% Titre du document
pdfsubject = {}, % Sujet
pdfkeywords = {PIP, Hoare, logic, proof}, % Mots-clefs
pdfstartview={FitH}
pdfcreator = {Texmaker}}	

% header & footer
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhead[C]{} 
\fancyhead[R]{}
\fancyhead[L]{\leftmark}
\fancyfoot[C]{\thepage}

% Commands
\makeatletter
\def\@makechapterhead#1{
  {\parindent \z@ \raggedright \normalfont
    \interlinepenalty\@M
    \Huge\bfseries  \thechapter.\quad #1\par\nobreak
    \vskip 20\p@ }}
\makeatother

\newcommand\st{\textsuperscript{st}\xspace}
\newcommand\nd{\textsuperscript{nd}\xspace}
\newcommand\rd{\textsuperscript{rd}\xspace}
\newcommand\rth{\textsuperscript{th}\xspace}

\renewcommand{\lstlistingname}{\textbf{Script}}
\renewcommand{\lstlistlistingname}{List of \lstlistingname s}

\newcommand\BackgroundPic{%
\put(0,0){%
\parbox[b][\paperheight]{\paperwidth}{%
\vfill
\centering
\includegraphics[width=\paperwidth,height=\paperheight,%
keepaspectratio]{img/cover.jpg}%
\vfill
}}}

\providecommand{\keywords}[1]{\textbf{\textit{Keywords : }} #1}

\renewcommand\appendixname{Appendixes : Project files}
\renewcommand\appendixpagename{Appendixes : Project Files}
\renewcommand\appendixtocname{Appendixes : Project Files}

\makeglossaries

% Coq language for lstlisting
	% Define Language
\lstdefinelanguage{Coq}
{
  % list of keywords
  morekeywords={
    Definition,Lemma,Instance,Program,
    Axiom,Record,Parameter,
    Inductive,Fixpoint
  },
  sensitive=true,
  morecomment=[s]{(*}{*)}, % comments
  morestring=[b]" % strings
}
 % Define Colors
\definecolor{coqOrange}{RGB}{255,69,0}
\definecolor{coqPurple}{RGB}{148,0,211}
\definecolor{coqRed}{RGB}{189,92,61}
\definecolor{coqPink}{RGB}{255,41,254}
\definecolor{coqBg}{RGB}{255,248,220}
\definecolor{coqSep}{RGB}{5,98,19}

% Set Language
\lstset{
  language={Coq},
  frame=trbl,
  basicstyle=\small\ttfamily, 
  captionpos=t, 
  extendedchars=true,
  showstringspaces=false,
  commentstyle=\color{coqRed},
  keywordstyle=\bf\color{coqOrange},
  keywordstyle=[2]\bf\color{coqPurple},
  keywordstyle=[3]\color{coqSep},
  keywords=[2]{Proof,Qed,*,-,Import,Module,
  End,Export,Notation,Require},
  keywords=[3]{if,then,else,match,in,end,let,with},
  stringstyle=\color{coqPink}, 
  backgroundcolor=\color{coqBg}
}

\DeclareNameAlias{author}{last-first}
\bibliography{biblio.bib}

% abbreviations:
\newacronym{OS}{OS}{Operating System}
\newacronym{TCB}{TCB}{Trusted Computing Base}
\newacronym{IPC}{IPC}{Inter-Process Communication}
\newacronym{MMU}{MMU}{Memory Management Unit}
\newacronym{API}{API}{Application Programming Interface}
\newacronym{HAL}{HAL}{Hardware Abstraction Layer}
\newacronym{MAL}{MAL}{Memory Abstraction Layer}
\newacronym{IAL}{IAL}{Interrupt Abstraction Layer}
\newacronym{DSL}{DSL}{Domain Specific Language}
\newacronym{SOS}{SOS}{Structural Operational Semantics}
\glsaddall

\begin{document}
 
\input{./cover.tex}

\afterpage{\null\thispagestyle{empty}\newpage}
\afterpage{\null\thispagestyle{empty}\newpage}
\afterpage{\null\thispagestyle{empty}\newpage}


\input{./abstract.tex}

\input{./acknowledgement.tex}

%Table of contents
\tableofcontents
\thispagestyle{empty}
\addtocontents{toc}{\protect\thispagestyle{empty}}

%Table of scripts
\newpage

\cleardoublepage
\begingroup
\makeatletter
\let\ps@plain\ps@empty
\makeatother

\pagestyle{empty}
\lstlistoflistings
\cleardoublepage
\endgroup
\newpage

%Table of FIGURES
\listoffigures
\thispagestyle{empty}
\newpage

%Abreviations
\printglossary[title={Acronyms}]
\thispagestyle{empty}

%empty page
\newpage
\thispagestyle{empty}
\setcounter{page}{1}
\newpage

\input{./introduction.tex}

\input{./cristal.tex}
 
\input{./PIP.tex}

\input{./contributions.tex}

\input{./conclusion.tex}

% bibliography
% not cited
\printbibliography[heading=bibintoc]
%\DeclareNameAlias{author}{last-first}
%\bibliography{biblio.bib}{}
%\bibliographystyle{plain}

\input{./annexes.tex}

\end{document}